# ---- Put these lines at the very TOP of the test file ----
import sys, types
from unittest import mock

# Ensure google.* parents exist
sys.modules.setdefault("google", types.ModuleType("google"))
sys.modules.setdefault("google.cloud", types.ModuleType("google.cloud"))

# Stub the module your code imports:  from google.cloud import datacatalog_v1
sys.modules["google.cloud.datacatalog_v1"] = mock.MagicMock()

# If your env doesn't have google.api_core.exceptions, stub that too
sys.modules.setdefault("google.api_core", types.ModuleType("google.api_core"))
exceptions_mod = types.ModuleType("google.api_core.exceptions")
class AlreadyExists(Exception): ...
class MethodNotImplemented(Exception): ...
exceptions_mod.AlreadyExists = AlreadyExists
exceptions_mod.MethodNotImplemented = MethodNotImplemented
sys.modules["google.api_core.exceptions"] = exceptions_mod
# ----------------------------------------------------------
